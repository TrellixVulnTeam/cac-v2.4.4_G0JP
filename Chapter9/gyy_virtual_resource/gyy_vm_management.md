# 9.1.1.公有云虚拟机管理

云服务器ECS（Elastic Compute Service）是阿里云提供的性能卓越、稳定可靠、弹性扩展的IaaS（Infrastructure as a Service）级别云计算服务。

用户能够通过云平台纳管阿里云账号现有的虚拟机资源，也可以对虚拟机进行创建、启停、调用控制台等操作。

在“资源管理”菜单下选择左侧”虚拟机资源管理”的导航菜单，之后点击”虚拟机”的子菜单，即可看到虚拟机的管理界面：



在虚拟机的详情页中支持查看虚拟机的详情、运行、配置和绑定资源信息，并支持对虚拟机执行相关操作。

- 基本信息：显示虚拟机的名称、所有者、所在组织等基本信息；
- 运行信息：显示虚拟机的状态、区域、创建时间等运行信息；
- 配置：显示虚拟机CPU、内存、操作系统等配置信息；
- 绑定资源：显示虚拟机挂载的虚拟磁盘、所属VPC、网络IP等资源信息。

与此同时，在详情页中，也支持查看选定虚拟机的监控信息、虚拟磁盘、网络、快照和每日成本，并执行相关的操作。

- 监控页：支持查看虚拟机选定时间内的监控图像，包括CPU、内存使用率，磁盘读写BPS和IOPS；
- 虚拟磁盘页：支持查看虚拟机挂载的磁盘情况，并支持对虚拟机挂载的虚拟磁盘执行相关操作；
- 网络页：支持查看虚拟机配置的网络情况，包括IP地址、MAC地址、驱动和IP子网的相关信息；
- 安全组页：支持查看虚拟机配置的安全组情况，并支持对安全组规则进行配置操作；
- 磁盘快照页：支持查看虚拟磁盘的快照情况，并支持对次盘快照执行相关操作；
- 操作日志页：支持查看虚拟机的操作审计信息。

## 相关操作

HYPERX云管理平台支持用户对虚拟机进行管理，支持的功能如下：

### 特色操作

- 全局搜索：用户可以根据虚拟机的显示名称、内部名称、网络IP等字段全局搜索虚拟机；
- 自定义表头：用户可以从“列选择器”中自定义虚拟机管理界面列表显示的表头(如状态、内部名称、网络IP等)；
- 高级筛选：用户可以从表头右侧根据虚拟机的名称、状态、内部名称等字段筛选出符合条件的虚拟机；

### 基础操作

- 创建虚拟机：填写基本信息、选择配置、镜像和网络后，创建满足业务的虚拟机；
- 关机/开机：将处于运行状态的虚拟机关闭/将处于停止状态的虚拟机开启；
- 重启：重新启动运行中状态的虚拟机；
- 释放：彻底销毁并释放选定的虚拟机，包括虚拟机关联的磁盘和磁盘快照；
- 远程登录：在云平台中打开虚拟机的控制台，支持在控制台中对虚拟机进行相关的操作；
- 同步状态：将阿里云中虚拟机的状态手动同步至云平台；
- 批量操作：支持批量勾选虚拟机列表的复选框，对选中的虚拟机执行开机、关机或重启的操作；

### 密码操作

- 显示密码：显示处于运行或关闭状态的虚拟机的密码；
- 重置密码：为处于关闭状态的虚拟机重置密码；
- 绑定密钥：将虚拟机的登录方式切换为密钥登录，并为虚拟机绑定SSH密钥；
- 解绑密钥：将选定的SSH密钥从虚拟机上卸载，将虚拟机登录方式切回密码登录；

### 配置操作

- 重装系统：为处于选定的虚拟机重新安装操作系统；

### 常规操作

- 编辑虚拟机信息：编辑虚拟机的名称和备注信息，修改的名称为虚拟机的计算机名；
- 删除保护：开启删除保护后虚拟机将不支持被释放；

### 安全组操作

- 配置安全组规则：配置选定安全组中的出入口规则；
- 编辑安全组：编辑选定安全组的名称和备注信息；
- 删除安全组：将选定的安全组从当前虚拟机中移除；

### 操作审计

- 查看日志：支持查看选定虚拟机的操作审计。

操作入口如下：

- 资源管理→虚拟资源管理→虚拟机

## 操作说明

### 基础操作

#### 虚拟机的创建

① 在公有云虚拟机管理界面中，点击“创建虚拟机”按钮：



② 将会进入创建虚拟机的界面，首先需要配置新建虚拟机在云平台中所属的用户，以及扣费的云账户：



> [!NOTE]
>
> - 允许选择的云账户为当前用户所在组织关联的云账户。

③ 需要配置所创虚拟机的名称和数量信息：



> [!NOTE]
>
> - 批量创建虚拟机支持的最大创建数量为10台；
> - 虚拟机名称以字母开头，由字母、数字或连字符"-"组成，但不能以"-"结尾，长度为2-62位；
> - 批量创建虚拟机时，名称支持有序后缀占位符‘#’，用法举例，名称host##，数量2，创建后实例的名称依次为host01、host02，已有同名实例，序号顺延。

④ 选择虚拟机的付费方式、可用区及网络配置信息：



> [!NOTE]
>
> - 虚拟机可选的网络信息和云账号、可用区有关，显示的仅为当前云账号在当前可用区下的可用VPC和子网。

⑤ 选择虚拟机的CPU、内存，从而选出虚拟机规格套餐：



⑥ 选择虚拟机安装操作系统的镜像：



> [!NOTE]
>
> - 操作系统会根据选择的虚拟化平台和可用区域的变化而变化。

⑦ 调整虚拟机系统磁盘容量，并同支持挂载多块数据磁盘：



> [!NOTE]
>
> - 虚拟机最多可挂载12块数据磁盘。

⑧ 复核虚拟机的管理员账号名称，并选择虚拟机的管理员密码：



> [!NOTE]
>
> - 虚拟机密码支持随机生成和手动指定，如果是Linux操作系统的虚拟机，支持采用密钥对登录；
> - 若选择手动指定密码，支持配置12~30个字符的密码，必须同时包含四项（大小写字母、数字、特殊符号 ~`!@#$%^&*()-_=+[]{}|:':\",./<>?中至少一个），不能以“/”开头。

⑨ 选择虚拟机的资源标签：



⑩ 配置虚拟机的弹性公网IP和安全组策略后，点击"确定"按钮，即可按需创建虚拟机：



> [!NOTE]
>
> - 若虚拟机配置弹性公网IP，支持通过公网访问该虚拟机；
> - 用户支持自定义一个或多个安全组策略，创建后虚拟机将会依据配置的全部安全组策略生效。

#### 虚拟机的开机、关机、重启

① 在公有云虚拟机管理界面中，勾选需要进行操作虚拟机的复选框，点击“批量操作”按钮，选择需要进行的操作：



② 将会弹出”确认操作”的操作提示框，可以复核待操作虚拟机的相关信息(以关机作为例)，复核信息无误后，点击"确定"按钮，即可对选中虚拟机执行相关操作：



> [!NOTE]
>
> - 开机、关机、重启操作均支持批量处理，用户可勾选虚拟机左侧的复选框后点击相应的按钮执行批量操作；
> - 批量操作时，若勾选的虚拟机中有操作状态不符合规定的虚拟机，将会给出提示告警。

#### 虚拟机的释放

① 在公有云虚拟机管理界面中，选择需要释放的虚拟机，在操作列中点击"释放"按钮：



② 将会弹出”释放确认”的操作提示框，点击"确定"按钮，即可释放选定的虚拟机资源：



#### 远程登录虚拟机

① 在公有云虚拟机管理界面中，选择需要远程登录的虚拟机，在操作列中点击"远程登录"按钮：



② 将会在新页面中打开虚拟机的控制台： 



> [!NOTE]
>
> - 当且仅当虚拟机处于“运行”状态支持打开控制台，对之进行相关操作；
> - 如需查看虚拟机密码，请查阅“显示密码”操作；

#### 同步虚拟机状态

① 在公有云虚拟机管理界面中，选择需要同步状态的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击“运行信息”操作列的“同步状态”按钮，将会使云平台的虚拟机状态和阿里云的虚拟机状态进行同步：



### 密码操作

#### 显示密码

① 在公有云虚拟机管理界面中，选择需要显示密码的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"基本信息"中"登录密码"的"显示密码"按钮：



③ 即可显示虚拟机的登录密码：



#### 重置密码

① 在公有云虚拟机管理界面中，选择需要重置密码的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击“运行信息”操作列的“重置密码”按钮：



③ 将会弹出“重置密码”的操作提示框，可以选择随机生成密码或手动输入密码。

- 随机生成：选择“随机生成”单选框，点击"确定"按钮，即可生成随机的密码：



- 手动输入：选择“手动输入”单选框，输入自定义的6位以上密码，复核确认后点击"确定"按钮，即可手动指定密码：



> [!NOTE]
>
> - 当且仅当虚拟机处于“停止”状态支持重置虚拟机的密码；
> - 虚拟机配置SSH密钥后，不支持重置密码；
> - 虚拟机重置密码后，可以勾选"自动启动"按钮，重置密码后实现重启虚拟机操作；
> - 若选择手动指定密码，支持配置12~30个字符的密码，必须同时包含四项（大小写字母、数字、特殊符号 ~`!@#$%^&*()-_=+[]{}|:':\",./<>?中至少一个），不能以“/”开头。

#### 绑定密钥

① 在公有云虚拟机管理界面中，选择需要绑定密钥的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击“绑定资源”操作列的“绑定密钥”按钮：



③ 将会弹出“绑定密钥”的操作提示框，选择需要配置的密钥后，点击"确定"按钮，用户即可用添加的密钥登录虚拟机：



> [!NOTE]
>
> - 虚拟机绑定SSH密钥后，不支持使用之前提供的密码登录；
> - 虚拟机绑定SSH密钥后，可以勾选"自动启动"按钮，重置密码后实现重启虚拟机操作。

#### 解绑密钥

① 在公有云虚拟机管理界面中，选择需要解绑密钥的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"绑定资源"操作列的"解绑密钥"按钮：



③ 将会弹出"解绑密钥"的操作提示框，复核信息无误后，点击"确定"按钮，即可将选定的SSH密钥从虚拟机上解绑：



> [!NOTE]
>
> - 虚拟机解绑SSH密钥后，会将登录方式切换为密码登录，用户可以使用云平台提供的密码登入虚拟机；
> - 虚拟机解绑SSH密钥后，可以勾选"自动启动"按钮，重置密码后实现重启虚拟机操作。

### 配置操作

#### 重装系统

① 在公有云虚拟机管理界面中，选择需要重装系统的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"配置"操作列的"重装系统"按钮：



③ 将会弹出“重装系统”的操作提示框，选择需要重装系统的镜像，并设置管理员密码后，点击"确定"按钮，即可为选中的虚拟机重装系统：



> [!NOTE]
>
> - 所选镜像容量最小磁盘要求需小于虚拟机系统盘大小；
> - 虚拟机重装系统会导致系统磁盘上的数据被覆盖，数据盘不受影响。用户需要提前备份好系统磁盘的重要文件；
> - 如果选择"保留镜像设置"的方式配置虚拟机密码，会使用镜像原有密码，需要确保用户知晓源镜像的登录密码；
> - 虚拟机重装系统后，可以勾选"自动启动"按钮，重置密码后实现重启虚拟机操作。

### 常规操作

#### 编辑虚拟机信息

① 在公有云虚拟机管理界面中，选择需要编辑信息的虚拟机，在操作列中点击"编辑"按钮：



② 将会弹出”编辑虚拟机”的操作提示框，编辑虚拟机的名称和备注信息后，点击"确定"按钮，即可修改虚拟机的相关信息：



> [!NOTE]
>
> - 修改的虚拟机名称为虚拟机的计算机名，需要重启虚拟机后在操作系统中生效。

#### 开启删除保护

① 在公有云虚拟机管理界面中，选择需要开启删除保护的虚拟机，在操作列中点击"设置删除保护"按钮：



② 将会弹出"设置删除保护"的操作提示框，将"删除保护"开关置为"启用"，点击"确定"按钮，即可开启选中的虚拟机的删除保护：



#### 关闭删除保护

① 在公有云虚拟机管理界面中，选择需要关闭删除保护的虚拟机，在操作列中点击"设置删除保护"按钮：



② 将会弹出"设置删除保护"的操作提示框，将"删除保护"开关置为"禁用"，点击"确定"按钮，即可关闭选中的虚拟机的删除保护：

### 安全组操作

#### 配置安全组规则

① 在公有云虚拟机管理界面中，选择需要配置安全组规则的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"安全组"选项卡，进入安全组配置页面：



③ 选择需要配置规则的安全组，在操作列中点击"配置规则"按钮：



④ 将会跳转到安全组的配置界面：



> [!NOTE]
>
> - 如需了解配置安全组的相关内容，请查阅公有云安全组管理章节。

#### 编辑安全组

① 在公有云虚拟机管理界面中，选择需要编辑安全组的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"安全组"选项卡，进入安全组配置页面：



③ 选择需要编辑规则的安全组，在操作列中点击"编辑"按钮：



④ 将会弹出”编辑安全组”的操作提示框，编辑安全组的名称和备注信息后，点击"确定"按钮，即可编辑安全组的相关信息：



#### 删除安全组

① 在公有云虚拟机管理界面中，选择需要删除安全组的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"安全组"选项卡，进入安全组配置页面：



③ 选择需要删除的安全组，在操作列中点击"删除"按钮：



④ 将会弹出"删除确认"的操作提示框，点击"确定"按钮，即可将选定的安全组从虚拟机中删除：



### 操作审计

#### 查看日志

① 在公有云虚拟机管理界面中，选择需要查看日志的虚拟机，点击虚拟机名称进入虚拟机详情页面：



② 点击"操作日志"选项卡，进入操作日志的页面，即可查看选定虚拟机的操作审计信息：

